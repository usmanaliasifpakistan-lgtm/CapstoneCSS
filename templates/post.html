<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Post</title>
        {% include "header.html" %}
        {{ ckeditor.load() }}
        {{ ckeditor.config(name='comment') }}

    </head>
    <body>

        <!-- Page Header-->
        <header class="masthead" style="background-image: url('{{post_data.img_url}}')">
            <div class="container position-relative px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">   
                    <div class="col-md-10 col-lg-8 col-xl-7">
                        <div class="post-heading">
                            <h1>{{ post_data.title }}</h1>
                            <h2 class="subheading">{{ post_data.subtitle }}</h2>
                            <span class="meta">
                                Posted by
                                <a href="#!">{{ post_data.author_id }}</a>
                                on {{ post_data.date }}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- Post Content-->

        <article class="mb-4">
            <div class="container px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-10 col-lg-8 col-xl-7">
                        <ol>
                            <li>
                                <p>
                                    {{ post_data.body | safe }}
                                        </p>
                                    </li>
                                </ol>
                                {% if current_user.id == 1 %}
                                <a href="{{ url_for('edit_post', blog_id=post_data.id)}}" style="color: lime;">Edit Post</a>
                                {% endif %}
                    </div>
                    <div class="col-md-10 col-lg-8 col-xl-7">
                        <!-- Comments Section -->
                        <form class="form form-horizontal" method="post" role="form">
                                        {{ form.csrf_token }} {{ form.hidden_tag() }}
                                        {{ form.comment.label }}<br>
                                        {{ form.comment() }}<br>
                                        {{ form.submit() }}
                                
                                    </form>
                    </div>
                </div>
            </div>
        </article>
        {% for comment in post_data.comments %}
        <div class="container px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <div class="col-md-10 col-lg-8 col-xl-7">
                    <div>
                        <img src="{{ comment.comment_author.email | gravatar }}" />{{ comment.comment_author.name }} Said:
                    </div>
                    <div class="post-heading">
                         
                        <p>{{ comment.text | safe }}</p>
                        <span class="meta">
                        </span>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
        <!-- Footer-->
         <footer class="border-top">
            {% include "footer.html" %}
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="{{ url_for ('static', filename = 'js/scripts.js' ) }}"></script>
    </body>
</html>
