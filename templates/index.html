<!DOCTYPE html>
<html lang="en">
    <head>
<title>Clean Blog - Start Bootstrap Theme</title>
        {% include "header.html" %}
    </head>
    <body>
        <!-- Page Header-->
        <header class="masthead" style="background-image: url('{{ url_for('static', filename = 'assets/img/home-bg.jpg') }}')">
            <div class="container position-relative px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-10 col-lg-8 col-xl-7">
                        <div class="site-heading">
                            <h1>Clean Blog</h1>
                            <span class="subheading">A Blog Theme by Start Bootstrap</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- Main Content-->
         <p class="errros", style="color: red;"><strong>
                {% with messages = get_flashed_messages() %}
                {% if messages %}
        
                {% for message in messages %}
                {{ message }}
                {% endfor %}
        
                {% endif %}
                {% endwith %}
            </strong></p>
        <div class="container px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <div class="col-md-10 col-lg-8 col-xl-7">
                    <!-- Divider-->
                    <hr class="my-4" />
                    <!-- Post preview-->
                     {% if not data %}
                        <h2 class="post-title">No blog posts yet!</h2>
                     {% else %}
                        {% for d in data: %}
                    
                        <div class="post-preview">
                            <a href="{{ url_for('post', blog_id = d.id)}}">
                        <h2 class="post-title">{{ d.title }}</h2>
                            <h3 class="post-subtitle">{{ d.subtitle }}</h3>
                        </a>
                        <p class="post-meta">
                            Posted by
                            <a href="#!">{{ d.author_id }}</a> <!--Changed from post.author as post.author is now a User object.
            post.author.name Min working with d.author WHY?-->
                            on {{ d.date }} 
                            {% if current_user.id == 1 %}
                            <a href="{{ url_for('delete_post', blog_id=d.id) }}"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3-fill" viewBox="0 0 16 16">
  <path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5"/>
</svg></a>
                        </p>
                    </div>
                    {% endif %} <!--2nd if closed-->
                     {% endfor %}   
                     
                    {% endif %} <!--1st if closed-->
                    <!-- Divider-->
                    <hr class="my-4" />
                    <!-- Pager-->
                     {% if current_user.id == 1 %}
                    <div class="d-flex justify-content-end mb-4">
                        <a class="btn btn-primary text-uppercase" href="{{ url_for('create_post')}}">Create a New Post â†’
                        </a>
                    </div>
                    {% endif %}
                    
                </div>
            </div>
        </div>
        <footer class="border-top">
            {% include "footer.html" %}
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="{{ url_for ('static', filename = 'js/scripts.js' ) }}"></script>
    </body>
</html>
